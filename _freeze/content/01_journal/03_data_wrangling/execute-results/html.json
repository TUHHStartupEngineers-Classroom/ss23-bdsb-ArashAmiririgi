{
  "hash": "27be62b2b92877210c50fc8842b9e041",
  "result": {
    "markdown": "---\ntitle: \"Data Wrangling\"\nauthor: \"Arash Amiririgi\"\n---\n\n\n::: callout-note\nA reduced data set related to patent data provided by the USPTO is analysed here.\n:::\n\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-1_3db992e8b3b58a54acfdcf0ca7880b84'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(data.table)\nlibrary(vroom)\nlibrary(lubridate)\n\ncol_patent_types <- list(id = col_character(), date = col_date(\"%Y-%m-%d\"),\n                         num_claims = col_double())\ncol_patent_assignee_types <- list(patent_id = col_character(),\n                                  assignee_id = col_character())\ncol_assignee_types <- list(id = col_character(), type = col_double(),\n                           organization = col_character())\ncol_uspc_types <- list(patent_id = col_character(), mainclass_id = col_double(),\n                       sequence = col_double())\npatent_tbl <- vroom(file = \"patent.tsv\", delim = \"\\t\", col_types  = col_patent_types, \n                    na = c(\"\", \"NA\", \"NULL\"))\npatent_assignee_tbl <- vroom(file = \"patent_assignee.tsv\", delim = \"\\t\",\n                     col_types  = col_patent_assignee_types, na = c(\"\", \"NA\", \"NULL\"))\nassignee_tbl <- vroom(file = \"assignee.tsv\", delim = \"\\t\",\n                      col_types  = col_assignee_types, na = c(\"\", \"NA\", \"NULL\"))\nuspc_tbl <- vroom(file = \"uspc.tsv\", delim = \"\\t\", col_types  = col_uspc_types,\n                  na = c(\"\", \"NA\", \"NULL\"))\n```\n:::\n\n\n## Question:\n### Patent Dominance: What US company / corporation has the most patents? List the 10 US companies with the most assigned/granted patents.\n\n### using dplyr\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-2_ad97b09d4574f44737e2c9221dbd6736'}\n\n```{.r .cell-code}\npatent_organization_dplyr <- left_join(patent_assignee_tbl,assignee_tbl,\n                                       by= c(\"assignee_id\"=\"id\"))\npatent_organization_dplyr %>% filter(!(is.na(organization)) & type == 2) %>%\n  group_by(organization) %>%\nsummarise(number_of_patents = n()) %>% ungroup() %>% arrange(desc(number_of_patents)) %>%\n  head(10)\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|organization                                | number_of_patents|\n|:-------------------------------------------|-----------------:|\n|International Business Machines Corporation |              7547|\n|Microsoft Corporation                       |              3165|\n|Google Inc.                                 |              2668|\n|QUALCOMM Incorporated                       |              2597|\n|Apple Inc.                                  |              2201|\n|General Electric Company                    |              1873|\n|Hewlett-Packard Development Company, L.P.   |              1638|\n|AT&T INTELLECTUAL PROPERTY I, L.P.          |              1625|\n|Intel Corporation                           |              1616|\n|GM Global Technology Operations LLC         |              1533|\n\n</div>\n:::\n:::\n\n\n### using data.table\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-3_424cde2d9522b4e0a91412cba756d2d5'}\n\n```{.r .cell-code}\nsetDT(patent_assignee_tbl)\nsetDT(assignee_tbl)\npatent_organization_dt <- patent_assignee_tbl[assignee_tbl, on= c(\"assignee_id\"=\"id\")]\npatent_organization_dt[!(is.na(organization)) & type == 2, .N, by = organization][\n  order(-N)] %>% head(10)\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|organization                                |    N|\n|:-------------------------------------------|----:|\n|International Business Machines Corporation | 7547|\n|Microsoft Corporation                       | 3165|\n|Google Inc.                                 | 2668|\n|QUALCOMM Incorporated                       | 2597|\n|Apple Inc.                                  | 2201|\n|General Electric Company                    | 1873|\n|Hewlett-Packard Development Company, L.P.   | 1638|\n|AT&T INTELLECTUAL PROPERTY I, L.P.          | 1625|\n|Intel Corporation                           | 1616|\n|GM Global Technology Operations LLC         | 1533|\n\n</div>\n:::\n:::\n\n\n## Question:\n### Recent patent activity: What US company had the most patents granted in August 2014? List the top 10 companies with the most new granted patents for August 2014.\n\n### using dplyr\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-4_0099bfa9acab91e1aa02f588b46c78db'}\n\n```{.r .cell-code}\npatent_organization_date_dplyr <- left_join(patent_organization_dplyr, patent_tbl,\n                                            by = c('patent_id' = 'id')) %>% select(1:5)\npatent_organization_date_dplyr %>% filter(!(is.na(organization)) &\n                                            month(date) == 8 & type == 2) %>%\n  group_by(organization) %>% summarise(number_of_patents = n()) %>%\n  ungroup() %>% arrange(desc(number_of_patents)) %>% head(10)\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|organization                                | number_of_patents|\n|:-------------------------------------------|-----------------:|\n|International Business Machines Corporation |               718|\n|Microsoft Corporation                       |               337|\n|Google Inc.                                 |               240|\n|QUALCOMM Incorporated                       |               223|\n|Apple Inc.                                  |               222|\n|Intel Corporation                           |               159|\n|General Electric Company                    |               148|\n|AT&T INTELLECTUAL PROPERTY I, L.P.          |               146|\n|Hewlett-Packard Development Company, L.P.   |               140|\n|GM Global Technology Operations LLC         |               138|\n\n</div>\n:::\n:::\n\n\n### using data.table\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-5_eddf65e736e66479629083bcf12f0ec9'}\n\n```{.r .cell-code}\nsetDT(patent_tbl)\npatent_organization_date_dt <- patent_tbl[patent_organization_dt,\n                                          on = c('id' = 'patent_id')][,!('num_claims')]\npatent_organization_date_dt[!(is.na(organization)) & month(date) == 8 &\n                              type == 2, .N, by = organization][order(-N)] %>% head(10)\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|organization                                |   N|\n|:-------------------------------------------|---:|\n|International Business Machines Corporation | 718|\n|Microsoft Corporation                       | 337|\n|Google Inc.                                 | 240|\n|QUALCOMM Incorporated                       | 223|\n|Apple Inc.                                  | 222|\n|Intel Corporation                           | 159|\n|General Electric Company                    | 148|\n|AT&T INTELLECTUAL PROPERTY I, L.P.          | 146|\n|Hewlett-Packard Development Company, L.P.   | 140|\n|GM Global Technology Operations LLC         | 138|\n\n</div>\n:::\n:::\n\n\n## Question:\n### Innovation in Tech: What is the most innovative tech sector? For the top 10 companies (worldwide) with the most patents, what are the top 5 USPTO tech main classes?\n\n### using dplyr\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-6_f6bb6d03142269e42ee495a9701e4fd6'}\n\n```{.r .cell-code}\npatent_organization_class_dplyr <- left_join(patent_organization_dplyr,uspc_tbl,\n                               by = 'patent_id', relationship = \"many-to-many\") %>% select(1:5)\npatent_organization_class_dplyr <- patent_organization_class_dplyr %>%\n  filter(!(is.na(organization))) %>% group_by(organization) %>%\n  mutate(number_of_patents = n()) %>% ungroup()\ntop_organization_dplyr <- patent_organization_class_dplyr %>%\n  group_by(organization) %>% slice(1) %>% ungroup() %>%\n  arrange(desc(number_of_patents)) %>% head(10) %>% pull(organization)\npatent_organization_class_dplyr %>% filter(organization %in% top_organization_dplyr &\n  !(is.na(mainclass_id))) %>% group_by(mainclass_id) %>%\n  summarise(number_of_incidents = n()) %>% ungroup() %>%\n  arrange(desc(number_of_incidents)) %>% head(5)\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n| mainclass_id| number_of_incidents|\n|------------:|-------------------:|\n|          257|                7979|\n|          455|                6191|\n|          370|                5483|\n|          348|                4113|\n|          709|                4018|\n\n</div>\n:::\n:::\n\n\n### using data.table\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-7_0784a1906e88c04b95b438bbae18d483'}\n\n```{.r .cell-code}\nsetDT(uspc_tbl)\npatent_organization_class_dt <- uspc_tbl[patent_organization_dt,\n                                         on = 'patent_id'][,!('sequence')]\npatent_organization_class_dt <- patent_organization_class_dt[!(is.na(organization)),\n                                         number_of_patents := .N, by = organization]\ntop_organization_dt <- patent_organization_class_dt[, .SD[1], by = organization][\n  order(-number_of_patents)] %>% head(10) %>% pull(organization)\npatent_organization_class_dt[!(is.na(mainclass_id)) & organization %in% top_organization_dt,\n                             .N, by = mainclass_id][order(-N)] %>% head(5)\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n| mainclass_id|    N|\n|------------:|----:|\n|          257| 7979|\n|          455| 6191|\n|          370| 5483|\n|          348| 4113|\n|          709| 4018|\n\n</div>\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}